# 데이터 모델링의 이해

## 데이터 모델링

### 데이터 모델링의 이해

#### 데이터 모델링

1. 현실 세계를 데이터 베이스로 표현하기 위해 추상화
2. 고객의 업무 프로세스를 이해해야함
3. 모델링 표기법을 사용해 모델링
4. 복잡하지 않게 모델링
5. 분석, 설계하면서 더 상세해짐
6. 비즈니스 프로세스를 이해하고  규칙을 정의하여 데이터모델로 표현

#### 데이터 모델링의 특징

추상화 : 공통적인 특징을 찾고 간략하게 표현

단순화 : 누구나 이해할 수 있게 표현

명확함 : 의미적 해석이 모호하지 않고 명확하게 해석되어야함

#### 데이터 모델링 단계

1. 개념적 모델링

   복잡하게 표현하지 않고 중요한 부분을 위주로 모델링, 기술적인 용어는 가급적 사용 안함.

   엔터티와 속성 도출, 개념적 ERD 작성

   추상화 수준이 가장 높다.

2. 논리적 모델링

   개념적 모델링을 논리적 모델링으로 변환, 식별자 도출, 릴레이션 정의, 정규화수행

   재사용성을 높인다

3. 물리적 모델링

   실제로 데이터베이스 구축. 테이블, 인덱스, 함수 등 생성

   성능, 보안, 가용성 등을 고려하여 데이터베이스 구축

+ 데이터 모델링 관점
  1. 데이터 : 비즈니스 프로세스에서 사용되는 데이터를 의미
  2. 프로세스 : 비즈니스 프로세스에서 수행하는 작업을 의미
  3. 데이터와 프로세스 : 프로세스와 데이터 간의 관계를 의미

#### ERD

+ ERD 작성절차

  1. 엔터티를 도출하고 그린다
  2. 엔터티를 배치한다
  3. 엔터티 간의 관계를 설정한다
  4. 관계명을 서술한다. 엔터티 간의 어떤 행위나 존재가 있는지 표현한다.
  5. 관계 참여도를 표현한다. 관계참여도는 한 개의 엔터티와 다른 엔터티 간의 참여하는 관계 수를 의미한다.
  6. 관계의 필수여부를 표현한다.

+ 고려사항

  중요한 엔터티를 가급적 왼쪽 상단에 배치한다.

  ERD는 이해가 쉬워야하고 복잡하지 않아야한다.

#### 데이터 모델링 고려사항

1. 데이터 모델의 독립성 : 정규화를 통해 데이터 중복 제가
2. 고객 요구사항의 표현 
3. 데이터 품질 확보



### 3층 스키마

#### 3층 스키마

사용자, 설계자, 개발자가 데이터베이스를 보는 관점에 따라 데이터베이스를 기술하고 이들간의 관꼐를 정의한 ANSI표준

3층 스키마는 데이터베이스의 독립성을 확보하기 위한 방법이다. 독립성을 확보하면 데이터 복잡도 감소, 데이터 중복 제거, 사용자 요구사항 변경에 따른 대응력 향상, 관리 및 유지보수 비용 절감

3단계 계층으로 분리, 각 계층을 뷰`View` 라고 함.

+ 논리적 독립성 : 개념 스키마가 변경되더라도 외부 스키마가 영향을 받지 않는 것
+ 물리적 독립성 : 내부 스키마가 변경되더라도 개념 스키마가 영향을 받지 않는 것

#### 3층 스키마 구조

외부단계 -> 개념단계 -> 내부단계

+ 외부 스키마 : 사용자 관점, 응용 프로그램이 접근하는 데이터베이스 정의, 사용자 관점에서 업무상 관련이 있는 데이터 접근.
+ 개념 스키마 : 설계자 관점, 사용자 전체 집단의 데이터베이스 구조. 전체 데이터베이스 내의 규칙과 구조를 표현, 통합 데이터베이스구조
+ 내부 스키마 : 개발자 관점, 데이터베이스의 물리적 저장 구조. 데이터저장구조, 레코드구조, 필드정의, 인덱스 등등의미.



### 엔터티

#### 엔터티

업무에서 관리해야 하는 데이터집합을 의미. 저장되고 관리되어야 하는 데이터.

엔터티는 개념, 사건, 장소등의 명사.

#### 엔터티 도출

고객의 비즈니스 프로세스에서 관리되어야 하는 정보를 추출.

#### 엔터티 특징

1. 식별자 : 엔터티는 유일한 식별자가 있어야함
2. 인스턴스 집합 : 2개 이상의 인스턴스가 있어야함
3. 속성 : 반드시 속성을 가지고 있음
4. 관계 : 다른 엔터티와 최소 한 개 이상의 관계를 가져야함
5. 업무 : 업무에서 관리되어야 하는 집합.

+ 릴레이션과 테이블, 인스턴스

  릴레이션과 테이블은 같은의미, 릴레이션에 기본키 및 제약조건을 설정하면 테이블.

  단, 릴레이션쉽은 릴레이션간의 관계를 의미

  인스턴스는 릴레이션이 가질 수 있는 값을 의미.

#### 엔터티 종류

+ 유형과 무형에 따른 엔터티 종류
  1. 유형 엔터티 : 업무에서 도출되어 지속적으로 사용되는 엔터티
  2. 개념 엔터티 : 물리적 형태가 없음. 개념적으로 사용되는 엔터티
  3. 사건 엔터티 : 비즈니스 프로세스를 실행하면서 생성되는 엔터티
+ 발생 시점에 따른 엔터티 종류
  1. 기본 엔터티 : 키 엔터티, 다른 엔터티로부터 영향을 받지 않고 독립적으로 생성되는 엔터티
  2. 중심 엔터티 : 기본 엔터티로부터 발생되고 행위 엔터티를 생성하는 것
  3. 행위 엔터티 : 2개 이상의 엔터티로부터 발생된다.



### 속성

#### 속성

속성이라는 것은 업무에서 필요한 정보인 엔터티가 가지는 항목이다.

속성은 더 이상 분리되지 않는 단위로, 업무에 필요한 데이터를 저장할 수 있다.

인스턴스의 구성요소이고, 의미적으로 더 이상 분해되지 않는다.

+ 엔터티
  + 속성
    + 데이터 저장

#### 속성의 특징과 종류

1. 특징 : 업무에서 관리되는 정보, 하나의 값만 가짐, 주 식별자에게 함수적으로 종속, 즉 기본키가 변경되면 속성의 값도 변경됨
2. 종류 
   + 분해 여부에 따른 속성의 종류
     1. 단일 속성 : 하나의 의미로 구성된 것
     2. 복합 속성 : 여러개의 의미가 있는 것, ex) 주소
     3. 다중값 속성 : 여러개의 값을 가질 수 있는 것. 다중값 속성은 엔터티로 분해된다.
   + 특성에 따른 속성의 종류
     1. 기본 속성 : 비즈니스 프로세스에서 도출되는 본래의 속성
     2. 설계 속성 : 데이터 모델링 과정에서 발생되는 속성, 유일한 값 부여
     3. 파생 속성 : 다른 속성에 의해서 만들어지는 속성
3. 도메인 : 속성이 가질 수 있는 값의 범위.



### 관계

#### 관계 (Relationship)

관계는 에터티 간의 관련성을 의미하며 존재관계와 행위관계로 분류됨.

존재관계는 두 개의 엔터티가 존재 여부의 관계가 있는 것이고, 행위 관계는 두 개의 엔터티가 어떤 행위에 의한 관련성이 있는 것.

#### 관계의 종류

1. 존재 관계 : 엔터티간의 상태를 의미. 고객이 은행에 회원가입을 하면, 관리점이 할당되고, 그 할당괸 관리점에서 고객 관리
2. 행위 관계 : 어떤 행위가 엔터티간에 있는 것,

#### 관계 차수

관계 차수는 두 개의 엔터티 간에 관계에 참여하는 수를 의미.

(관계 차수에 관한 그림은 책 74p 참고)

1. 1대1 관계 

   + 완전 1대1 관계 : 하나의 엔터티에 관계되는 엔터티의 관계가 하나인 경우로 반드시 존재
   + 선택적 1대1 관계 : 하나의 엔터티에 관계되는 엔터티의 관계가 하나이거나 없을수도 있음.

2. 1대N 관계 : 엔터티의 행이 하나 있을 때 다른 엔터티의 값이 여러 개 있는 관계. ex) 고객은 계좌를 여러개를 가질 수 있다.

3. M대N 관계 : 두 개의 엔터티가 서로 여러개의 관계를 가지고 있는 것. 1대N, N대1 로 해소해야 한다.

4. 필수적 관계와 선택적 관계.

   필수적 관계는 `|`로 표현되고, 반드시 하나가 있어야 하는 관계이다.

    선택적 관계는 `O` 로 표현되고, 없을수도 있는 관계이다.

   `고객 -|-------O- 계좌`

   `고객`은 `계좌`가 있어도 되고 없어도 되기 때문에 `계좌`는 `O` 로 표현한다. 하지만 `계좌`는 무조건 `고객`이 있어야한다. 따라서 `고객`은 `|` 로 표현한다.

   필수적으로 있어야 하는 쪽에 `|` 를 쓰고 선택적으로 있어야 하는 쪽에 `O` 를 쓴다.

#### 식별 관계와 비식별 관계

1. 식별 관계 

   강한 개체는 다른 엔터티에게 의존하지 않고 독립적으로 존재한다. 강한 개체가 다른 엔터티와 관계를 가질 떄 다른 엔터티에게 기본키를 공유한다. 강한 개체는 식별 관계로 표현된다. 식별관계란 강한 개체의 기본키를 다른 엔터티의 기본키 하나로 공유하는 것이다. 강한 개체의 기본키 값이 변경되면 식별 관계에 있는 엔터티의 값도 변경된다. 실선으로 표현한다.

   `고객 -|------------O- 계좌` 와 같은 관계가 있을 때, 강한 개체는 `고객` 이다. `고객` 은 계좌 없이도 독립적인 존재가 가능하다.

   `고객`의 기본키를 `계좌`가 공유할 때, `고객`의 기본키가 변경되면 `계좌`의 기본키도 변경된다.

2. 비식별 관계

   비식별 관계는 강한 개체의 기본키를 다른 엔터티의 기본키가 아닌 일반 칼럼으로 관계를 가지는 것이다.

   비식별 관계는점선으로 표현한다.

   `부서 -|- - - - - - - O - 사원`

3. 강한개체와 약한개체

   강한 개체는 누구에게도 지배되지 않고 독립적인 개체

   약한 개체는 개체의 존재가 다른 개체의 존재에 달려있는 개체이다.

#### 엔터티 식별자

식별자는 엔터티를 대표할 수 있는 유일성을 만족하는 속성.

1. 주 식별자

   주 식별자는 다음과 같은 속성을 가져야 한다.

   + 최소성
   + 대표성 : 엔터티를 대표할 수 있어야 하는 것
   + 유일성 : 유일하게 인스턴스를 식별
   + 불변성 : 자주 변경되지 않아야함

2. 키의 종류

   + 기본키 : 엔터티를 대표하는 키
   + 후보키 : 유일성과 최소성을 만족하는 키
   + 슈퍼키 : 유일성은 만족하지만 최소성을 만족하지 않는 키
   + 대체키 : 여러개의 후보키 중에서 기본키를 선정하고 남은 키
   + 외래키 : 하나 혹은 다수의 다른 테이블의 기본 키 필드를 가리키는 것으로 참조 무결성을 확인하기 위해서 사용되는 키. 허용된 값만 데이터베이스에 저장하기 위해서 사용

3. 식별자의 종류

   1. 식별자의 대표성 에 따른 종류 
      + 주 식별자 : 엔터티를 대표할 수 있는 식별자이며 다른 엔터티와 참조관계로 연결될 수 있다.
      + 보조 식별자 : 유일성과 최소성은 만족하지만 대표성을 만족하지 못하는 식별자
   2. 생성 여부에 따른 식별자 종류
      + 내부 식별자 : 엔터티 내부에서 스스로 생성되는 식별자. (주문번호, 종목코드 등등)
      + 외부 식별자 : 다른 엔터티와의 관계로 인하여 만들어지는 식별자
   3. 속성의 수에 따른 종류
      + 단일 식별자 : 하나의 속성으로 구성됨
      + 복합 식별자 : 두 개 이상의 속성으로 구성됨
   4. 대체 여부에 따른 종류
      + 본질 식별자 : 비즈니스 프로세스에서 만들어지는 식별자
      + 인조 식별자 : 인위적으로 만들어지는 식별자. 후보 식별자 중에서 주식별자로 선정할 것이 없거나 주 식별자가 너무 많은 칼럼으로 되어 있는 경우에 사용한다. 순서번호를 사용해서 식별자 생성.
